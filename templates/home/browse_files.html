{% extends "base.html" %}
{% block content %}
<div style="color: red">
    TODO: <br/>
    Read first few lines of the latest updated READMEs. Do this recursively. So that we can have a "Latest Updates" section.
</div>
<pre>
    Test Area
</pre>
<div style="border: 1px solid #ccc;"> Location: 
/ <a href="/home/browse_files/{{groupname}}">{{groupname}}</a> /
{% for crumb in crumbs %}
    {% ifnotequal  crumb.name  'None'  %}
        <a href="/home/browse_files/{{groupname}}/?dir={{crumb.path|urlencode }}">{{crumb.name}}</a> 
        {%ifnotequal url_dir ''%}
        /
        {% endifnotequal  %}
    {% endifnotequal  %}
{% endfor %}
</div>
<div>
    <h2>Description for current directory:</h2>
    {% if user.is_authenticated %}
        {{readme_for_current_dir}}
    {% else %}
        This directory has no description.
    {% endif %}
</div>

{% if files or directories%}
    <table border=1>
    <tr>
        <th>Directory Name</th>
        <th>Last Modified</th>
        <th>Description</th>
    </tr>
    {% for directory in directories %}
    <tr>
        <td><a href="/home/browse_files/{{groupname}}/?dir={{directory.path|urlencode }}">[dir] {{ directory.name }}</a></td>
        <td>{{directory.last_modified}}</td>
        <td>{{directory.readme}}</td>
    </tr>
    {% endfor %}
    </table>
    <table border=1>
    <tr>
        <th>File Name</th>
        <th>Size</th>
        <th>Last Modified</th>
        <th>Description</th>
    </tr>
    {% for file in files %}
    <tr>
        <td><a href="/home/download/{{groupname}}/{{ file.path|urlencode }}">{{ file.name }}</a></td>
        <td>{{file.size}}</td>
        <td>{{file.last_modified}}</td>
        <td>{{file.readme}}</td>
    </tr>
    {% endfor %}
    </table>
    
{% else %}
        No files/directories available.
{% endif %}

{% endblock %}
