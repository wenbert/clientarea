{% extends "base.html" %}
{% block content %}
<div>
    <h2>{{current_directory}}</h2>
</div>
<div style="border: 1px solid #ccc;"> Location: 
/ <a href="/home/browse_files/{{groupname}}">{{groupname}}</a> /
{% for crumb in crumbs %}
    {% ifnotequal  crumb.name  'None'  %}
        <a href="/home/browse_files/{{groupname}}/?dir={{crumb.path|urlencode }}">{{crumb.name}}</a> 
        {%ifnotequal url_dir ''%}
        /
        {% endifnotequal  %}
    {% endifnotequal  %}
{% endfor %}
</div>
<div>
    <p>
        {% if user.is_authenticated %}
            {{readme_for_current_dir}}
        {% else %}
            This directory has no description.
        {% endif %}
        <div>
            You can download the entire contents of <b>{{current_directory}}</b> directory as a zip file by clicking
            <a href="/home/download_dir_as_zip/{{groupname}}/">here</a>.
        </div>
    </p>
</div>

{% if files or directories%}
    <table border=1>
    <tr>
        <th>Directory Name</th>
        <th>Download as Zip</th>
        <th>Last Modified</th>
        <th>Description</th>
    </tr>
    {% for directory in directories %}
    <tr>
        <td><a href="/home/browse_files/{{groupname}}/?dir={{directory.path|urlencode }}">{{ directory.name }}</a></td>
        <td><a href="/home/download_dir_as_zip/{{groupname}}/?dir={{directory.path|urlencode }}">{{ directory.name }}.zip</a></td>
        <td>{{directory.last_modified}}</td>
        <td>{{directory.readme}}</td>
    </tr>
    {% endfor %}
    </table>
    <table border=1>
    <tr>
        <th>File Name</th>
        <th>Download as Zip</th>
        <th>Size</th>
        <th>Last Modified</th>
        <th>Description</th>
    </tr>
    {% for file in files %}
    <tr>
        <td><a href="/home/download/{{groupname}}/{{ file.path|urlencode }}">{{ file.name }}</a></td>
        <td><a href="/home/download_file_as_zip/{{groupname}}/{{file.path|urlencode }}">{{ file.name }}.zip</a></td>
        <td>{{file.size}}</td>
        <td>{{file.last_modified}}</td>
        <td>{{file.readme}}</td>
    </tr>
    {% endfor %}
    </table>
    
{% else %}
        No files/directories available.
{% endif %}

<pre>
    Test Area
</pre>
{% endblock %}
