{% extends "base.html" %}
{% block content %}

<div class="span-24 last">
    <h2>{{current_directory}}</h2>
</div>
<div class="span-24 last breadcrumb"> 
You are currently in: 
/ <a href="/home/browse_files/{{groupname}}">{{groupname}}</a> /
{% for crumb in crumbs %}
    {% ifnotequal  crumb.name  'None'  %}
        <a href="/home/browse_files/{{groupname}}/?dir={{crumb.path|urlencode }}">{{crumb.name}}</a> 
        {%ifnotequal url_dir ''%}
        /
        {% endifnotequal  %}
    {% endifnotequal  %}
{% endfor %}
</div>
<div class="span-24 last">
    <p>
        {% if user.is_authenticated %}
            {{readme_for_current_dir}}
        {% else %}
            This directory has no description.
        {% endif %}
        <div>
            You can download the entire contents of <b>{{current_directory}}</b> directory as a zip file by clicking
            <a href="/home/download_dir_as_zip/{{groupname}}/">here</a>.
        </div>
    </p>
</div>
<div class="span-24 last">
{% if files or directories%}
    <table class="table_bordered">
    <tr>
        <th style="width: 150px;">Directory Name</th>
        <th style="width: 150px;">Download as Zip</th>
        <th style="width: 80px;">Last Modified</th>
        <th>Description</th>
    </tr>
    {% for directory in directories %}
    <tr>
        <td><a href="/home/browse_files/{{groupname}}/?dir={{directory.path|urlencode }}">{{ directory.name }}</a></td>
        <td><a href="/home/download_dir_as_zip/{{groupname}}/?dir={{directory.path|urlencode }}">{{ directory.name }}.zip</a></td>
        <td>{{directory.last_modified}}</td>
        <td>{{directory.readme}}</td>
    </tr>
    {% endfor %}
    </table>
    <table class="table_bordered">
    <tr>
        <th style="width: 150px;">File Name</th>
        <th style="width: 150px;">Download as Zip</th>
        <th style="width: 80px;">Size</th>
        <th style="width: 80px;">Last Modified</th>
        <th>Description</th>
    </tr>
    {% for file in files %}
    <tr>
        <td><a href="/home/download/{{groupname}}/{{ file.path|urlencode }}">{{ file.name }}</a></td>
        <td><a href="/home/download_file_as_zip/{{groupname}}/{{file.path|urlencode }}">{{ file.name }}.zip</a></td>
        <td>{{file.size}}</td>
        <td>{{file.last_modified}}</td>
        <td>{{file.readme}}</td>
    </tr>
    {% endfor %}
    </table>
    
{% else %}
        No files/directories available.
{% endif %}
</div>

{% endblock %}
